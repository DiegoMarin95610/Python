"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4185],{1291:function(e,t,r){r.d(t,{J:function(){return g}});var s="https://js.stripe.com/v3",l=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,n=function(){for(var e=document.querySelectorAll('script[src^="'.concat(s,'"]')),t=0;t<e.length;t++){var r=e[t];if(l.test(r.src))return r}return null},i=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",r=document.createElement("script");r.src="".concat(s).concat(t);var l=document.head||document.body;if(!l)throw Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return l.appendChild(r),r},a=function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"1.52.1",startTime:t})},d=null,o=function(e,t,r){if(null===e)return null;var s=e.apply(void 0,t);return a(s,r),s},c=Promise.resolve().then(function(){return null!==d?d:d=new Promise(function(e,t){if("undefined"==typeof window||"undefined"==typeof document){e(null);return}if(window.Stripe,window.Stripe){e(window.Stripe);return}try{var r=n();r||(r=i(null)),r.addEventListener("load",function(){window.Stripe?e(window.Stripe):t(Error("Stripe.js not available"))}),r.addEventListener("error",function(){t(Error("Failed to load Stripe.js"))})}catch(s){t(s);return}})}),u=!1;c.catch(function(e){u||console.warn(e)});var g=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];u=!0;var s=Date.now();return c.then(function(e){return o(e,t,s)})}},4185:function(e,t,r){r.r(t),r.d(t,{default:function(){return y}});var s=r(5893),l=r(7294),n=r(5152),i=r.n(n),a=r(5675),d=r.n(a),o=r(1664),c=r.n(o),u=r(1163),g=r.n(u),h=r(9473),m=r(9709),x=r(1338),p=r(841),v=r(4432),f=r(1955),I=r(1106),j=r(7217);let b=async e=>window.confirm("There is a process of generating images running. Are you sure you want to leave?"),w=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Changes you made may not be saved.",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:b,s=(0,h.I0)(),n=(0,h.v9)(e=>{var t,r;return null===(t=e.user)||void 0===t?void 0:null===(r=t.user)||void 0===r?void 0:r.uid});(0,l.useEffect)(()=>{var l;if(!(null===(l=g().router)||void 0===l?void 0:l.change))return;let i=g().router.change,a=window.onbeforeunload;return e?((0,I.l)("UserTriedToLeaveThePageWhileImageIsGenerating",localStorage.getItem("userId")||n),window.onbeforeunload=()=>""):window.onbeforeunload=a,e&&((0,I.l)("UserTriedToLeaveThePageWhileImageIsGenerating",localStorage.getItem("userId")||n),g().router.change=async function(){for(var e,l,i,a=arguments.length,d=Array(a),o=0;o<a;o++)d[o]=arguments[o];let[c,,h]=d,m=null===(e=g().router)||void 0===e?void 0:e.state.asPath.split("?")[0],x=h.split("?")[0],p=m!==x,v=!1;(p&&(v=await r(t),(0,I.l)("UserConfirmedToLeaveThePageWhileImageIsGenerating",localStorage.getItem("userId")||n)),v)?(await f.Z.set("isImagesGenerating",null),await f.Z.remove("isImagesGenerating"),s((0,j.XI)(!1)),u.Router.prototype.change.apply(g().router,d)):"replaceState"===c&&p&&(await f.Z.set("isImagesGenerating",null),await f.Z.remove("isImagesGenerating"),s((0,j.XI)(!1)),(0,I.l)("UserNavigateBackOrForwardFromTheDashboardPageWhileImageIsGenerating",localStorage.getItem("userId")||n),await (null===(l=g().router)||void 0===l?void 0:l.push(null===(i=g().router)||void 0===i?void 0:i.state.asPath)),history.go(1))}),()=>{g().router.change=i,window.onbeforeunload=a}},[e,t,r])},N=i()(()=>r.e(7969).then(r.bind(r,7969)),{loadableGenerated:{webpack:()=>[7969]}}),k=()=>{let e=(0,h.I0)(),t=(0,u.useRouter)(),{showLeavePopup:r}=(0,h.v9)(e=>e.dashboard),n=r&&"/dashboard"===t.pathname;(0,l.useEffect)(()=>{},[n]),w(n);let i=(0,h.v9)(e=>e.user.userLoggedIn),a=(0,h.v9)(e=>e.user.user),o=(0,h.v9)(e=>e.user.showLoginModal),g=(0,p.v0)(),[j,b]=(0,l.useState)(null);(0,l.useEffect)(()=>{},[j]),(0,l.useEffect)(()=>{let t=(0,p.Aj)(g,async t=>{if(t){f.Z.set("userLoggedIn",!0),e((0,m.Wx)(!0)),await fetch("/api/idAlias",{method:"POST",body:JSON.stringify({guestId:f.Z.get("guestId"),newId:null==t?void 0:t.uid,usr:t})}),localStorage.setItem("userId",null==t?void 0:t.uid),f.Z.set("userPhoto",null==t?void 0:t.photoURL),f.Z.set("userStatus","user"),f.Z.remove("guestId");let r=await (0,x.PR)(null==t?void 0:t.uid);r&&(b(r),e((0,m.av)(r)))}else e((0,m.Wx)(!1)),f.Z.remove("userLoggedIn"),f.Z.remove("userPhoto"),f.Z.set("userStatus","guest"),localStorage.removeItem("userId"),e((0,m.av)(null))});return()=>t()},[g]);let k=()=>{e((0,m.pZ)(!0))},y=async()=>{await (0,p.w7)(g),localStorage.removeItem("userId"),await t.replace("/"),e((0,m.av)(null))},[C,S]=(0,l.useState)(!1),Z=()=>{S(e=>e=!e)},L=function(e){let[t,r]=(0,l.useState)(null);return(0,l.useEffect)(()=>{let t=window.matchMedia(e),s=()=>r(!!t.matches);return s(),t.addListener(s),()=>t.removeListener(s)},[e]),t}("(max-width: 767px)");(0,l.useEffect)(()=>{},[L]);let P=(0,l.useRef)(null),[U,O]=(0,l.useState)(0);(0,l.useEffect)(()=>{O(P.current.clientHeight)},[]);let[G,D]=(0,l.useState)(!1),T=()=>{D(e=>e=!e)};return(0,s.jsxs)(s.Fragment,{children:[o&&(0,s.jsx)("div",{className:"fixed top-0 left-0 w-full h-screen flex items-center justify-center bg-[rgba(0,0,0,0.5)] z-[2500]",children:(0,s.jsx)(N,{})}),(0,s.jsxs)("nav",{className:"py-4 select-none flex items-center justify-between md:justify-start relative ".concat("/"===t.pathname?"bg-transparent px-4 md:px-12 lg:px-20 lg:pl-36 xl:px-44 xl:pr-48":"bg-white px-4 md:pr-7 lg:px-8 lg:pl-5 xl:px-6 xl:pl-5 mb-6"," w-full !mx-0 ").concat("/dashboard"===t.pathname?"py-6":""),ref:P,children:[(0,s.jsx)("div",{children:(0,s.jsx)("h1",{className:"text-2xl md:text-3xl font-semibold",children:(0,s.jsx)(c(),{href:"/",onClick(){C&&Z()},children:"PatternedAI"})})}),(0,s.jsx)("div",{className:"md:w-full",children:(0,s.jsx)("div",{children:(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"md:hidden md:w-full",children:[C?(0,s.jsx)(d(),{src:"/assets/icons/CloseIcon.svg",width:25,height:25,alt:"Menu",onClick:()=>Z()}):(0,s.jsx)(d(),{src:"/assets/icons/HumburgerMenu.svg",width:25,height:25,alt:"Menu",onClick:()=>Z()}),C?(0,s.jsx)("div",{className:"bg-white absolute top-[".concat(U,"px] left-0 w-full mt-2 py-4 px-2 rounded-sm z-[2000] drop-shadow"),children:(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,s.jsxs)("ul",{className:"flex flex-col items-center justify-center space-y-4",children:[(0,s.jsx)("li",{children:(0,s.jsx)(c(),{href:"/gallery",onClick(){Z(),(0,I.l)("UserClickedOnGalleryLinkInNavbar",localStorage.getItem("userId")||(null==a?void 0:a.uid)||f.Z.get("guestId"))},children:"Gallery"})}),(0,s.jsx)("li",{children:(0,s.jsx)(c(),{href:i?"/dashboard?method=text":"",onClick(){Z(),k(),(0,I.l)("UserClickedOnDashboardLinkInNavbar",localStorage.getItem("userId")||(null==a?void 0:a.uid)||f.Z.get("guestId"))},children:"Dashboard"})}),(0,s.jsx)("li",{children:(0,s.jsx)(c(),{href:"/pricing",onClick(){Z(),(0,I.l)("UserClickedOnPricingLinkInNavbar",localStorage.getItem("userId")||(null==a?void 0:a.uid)||f.Z.get("guestId"))},children:"Pricing"})}),(0,s.jsx)("li",{children:(0,s.jsx)(c(),{href:"/prompt-guide",onClick(){Z(),(0,I.l)("UserClickedOnPromptGuideLinkInNavbar",localStorage.getItem("userId")||(null==a?void 0:a.uid)||f.Z.get("guestId"))},children:"Prompt Guide"})})]}),(0,s.jsx)("hr",{className:"w-3/4 my-4"}),i?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)("h3",{children:null==j?void 0:j.userName}),(0,s.jsxs)("div",{className:"flex mt-2 items-center space-x-2",children:[(0,s.jsx)(d(),{src:"/assets/icons/Diamond.svg",alt:"credit",width:20,height:20,className:"mt-1"}),(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)("span",{className:"text-xs",children:"Current Balance"}),(0,s.jsxs)("h3",{className:"text-sm mt-1",children:[isNaN((null==a?void 0:a.credit)+(null==a?void 0:a.subscriptionCredits))?0:(null==a?void 0:a.credit)+(null==a?void 0:a.subscriptionCredits)," ","Credit"]}),(0,s.jsx)("span",{className:"text-xs",onClick(){(0,v.M)(null==a?void 0:a.email),(0,I.l)("UserClickedOnAddCreditsLinkInNavbarToTopUpCredits",localStorage.getItem("userId")||(null==a?void 0:a.uid)||f.Z.get("guestId"))},children:"Add credits"})]})]}),(0,s.jsx)("div",{className:"pr-5 py-1 text-sm cursor-pointer",children:(0,s.jsx)(c(),{href:"/profile",onClick(){(0,I.l)("UserClickedOnProfileLinkInNavbar",localStorage.getItem("userId")||(null==a?void 0:a.uid)||f.Z.get("guestId"))},children:"Profile"})})]}),(0,s.jsx)("div",{className:"bg-[#14213D] text-white mt-4 rounded-md",children:(0,s.jsx)("button",{className:"w-full px-8 py-4",children:(0,s.jsx)(c(),{href:i?"/dashboard?method=text":"",onClick(){Z(),(0,I.l)("UserClickedOnGeneratePatternLinkInNavbar",localStorage.getItem("userId")||(null==a?void 0:a.uid)||f.Z.get("guestId"))},children:"Generate Patterns"})})}),(0,s.jsx)("hr",{className:"w-3/4 my-4"}),(0,s.jsx)("div",{className:"rounded-md border border-[#14213D] text-[#14213D] font-semibold w-9/12",children:(0,s.jsx)("button",{className:"w-full px-14 py-4",onClick(){y(),(0,I.l)("UserLoggedOut",localStorage.getItem("userId")||(null==a?void 0:a.uid)||f.Z.get("guestId"))},children:"Logout"})})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"w-3/4 duration-300 mb-3",children:(0,s.jsx)("button",{className:"w-full px-8 py-3 underline text-[18px]",onClick(){k(),(0,I.l)("UserLoggedIn",localStorage.getItem("userId")||(null==a?void 0:a.uid)||f.Z.get("guestId"))},children:"Sign in"})}),(0,s.jsx)("div",{className:"bg-[#14213D] text-white rounded-md w-3/4 duration-300 hover:bg-primaryDark",children:(0,s.jsx)("button",{className:"w-full px-8 py-4",onClick(){k(),(0,I.l)("UserLoggedIn",localStorage.getItem("userId")||(null==a?void 0:a.uid)||f.Z.get("guestId"))},children:"Sign up"})})]})]})}):(0,s.jsx)("div",{})]}),(0,s.jsxs)("div",{className:"hidden md:flex items-center justify-between w-full",children:[(0,s.jsx)("div",{className:"ml-3 lg:ml-10 ".concat("/dashboard"===t.pathname?"!ml-28 lg:!ml-52 xl:!ml-24":""),children:(0,s.jsxs)("ul",{className:"flex space-x-2 min-[768px]:text-[13px] min-[800px]:text-[15px] xl:text-lx min-[768px]:font-medium lg:space-x-4 ".concat("/dashboard"===t.pathname?"space-x-3":""),children:[(0,s.jsx)("li",{className:"cursor-pointer",children:(0,s.jsx)(c(),{href:"/gallery",className:"/gallery"===t.pathname?"text-black":"text-black/60",onClick:()=>(0,I.l)("UserClickedOnGalleryLinkInNavbar",localStorage.getItem("userId")||(null==a?void 0:a.uid)||f.Z.get("guestId")),children:"Gallery"})}),(0,s.jsx)("li",{className:"cursor-pointer",children:(0,s.jsx)(c(),{href:i?"/dashboard?method=text":"",className:"/dashboard"===t.pathname?"text-black":"text-black/60",onClick(){i||k(),(0,I.l)("UserClickedOnDashboardLinkInNavbar",localStorage.getItem("userId")||(null==a?void 0:a.uid)||f.Z.get("guestId"))},children:"Dashboard"})}),(0,s.jsx)("li",{className:"cursor-pointer",children:(0,s.jsx)(c(),{href:"/pricing",className:"/pricing"===t.pathname?"text-black":"text-black/60",onClick:()=>(0,I.l)("UserClickedOnPricingLinkInNavbar",localStorage.getItem("userId")||(null==a?void 0:a.uid)||f.Z.get("guestId")),children:"Pricing"})}),(0,s.jsx)("li",{className:"cursor-pointer",children:(0,s.jsx)(c(),{href:"/prompt-guide",className:"/prompt-guide"===t.pathname?"text-black":"text-black/60",onClick:()=>(0,I.l)("UserClickedOnPromptGuideLinkInNavbar",localStorage.getItem("userId")||(null==a?void 0:a.uid)||f.Z.get("guestId")),children:"Prompt Guide"})})]})}),i?(0,s.jsxs)("div",{className:"relative flex space-x-3",children:[(0,s.jsx)("div",{className:"bg-[#14213D] duration-300 hover:bg-primaryDark text-white rounded-md px-3 py-3 lg:px-6 lg:py-4 ".concat("/dashboard"===t.pathname?"hidden":""),children:(0,s.jsx)("button",{onClick:()=>(0,I.l)("UserClickedOnGeneratePatternLinkInNavbar",localStorage.getItem("userId")||(null==a?void 0:a.uid)||f.Z.get("guestId")),children:(0,s.jsx)(c(),{href:"/dashboard?method=text",children:"Generate Patterns"})})}),(0,s.jsxs)("div",{className:"flex items-center space-x-1 bg-white px-3 py-1 rounded-full select-none ".concat("/dashboard"!==t.pathname?"hidden":""),children:[(0,s.jsx)(d(),{src:"/assets/icons/Diamond.svg",alt:"credit",width:23,height:23}),(0,s.jsx)("span",{children:isNaN((null==a?void 0:a.credit)+(null==a?void 0:a.subscriptionCredits))?0:(null==a?void 0:a.credit)+(null==a?void 0:a.subscriptionCredits)})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,s.jsxs)("div",{async onClick(){if(!f.Z.get("userLoggedIn")){(0,m.pZ)(!0);return}(0,I.l)("UserClickedOnProfileLinkInNavbar",localStorage.getItem("userId")||(null==a?void 0:a.uid)||f.Z.get("guestId")),await t.push("/profile")},children:[(0,s.jsx)(d(),{src:f.Z.get("userPhoto")||"/assets/icons/userIcon.svg",width:25,height:25,alt:"User Photo",className:"rounded-full object-cover lg:!w-[35px]",loading:"lazy",unoptimized:!0})," "]}),(0,s.jsx)("div",{onClick:()=>T(),children:(0,s.jsx)(d(),{src:"/assets/icons/ArrowDown.svg",width:10,height:10,alt:"User Photo",className:"rounded-full object-cover lg:!w-[15px]"})})]}),(0,s.jsxs)("div",{className:"absolute right-0 w-36 mt-1.5 bg-white rounded-sm overflow-hidden drop-shadow-md ".concat(G?"block":"hidden"," ").concat("/dashboard"===t.pathname?"!top-14":"top-16"," z-[2001]"),children:[(0,s.jsx)("div",{className:"border-b-2",children:(0,s.jsxs)("div",{className:"flex items-center space-x-3 px-2 py-2",children:[(0,s.jsx)(d(),{src:"/assets/icons/Diamond.svg",alt:"credit",width:20,height:20}),(0,s.jsxs)("div",{className:"w-full flex flex-col",children:[(0,s.jsx)("span",{className:"text-xs font-semibold",children:"Current Balance"}),(0,s.jsx)("h3",{className:"text-sm font-bold",children:isNaN((null==a?void 0:a.credit)+(null==a?void 0:a.subscriptionCredits))?0:(null==a?void 0:a.credit)+(null==a?void 0:a.subscriptionCredits)}),(0,s.jsx)("span",{className:"text-xs font-semibold cursor-pointer",onClick(){(0,v.M)(null==a?void 0:a.email),(0,I.l)("UserClickedOnAddCreditsLinkInNavbarToTopUpCredits",localStorage.getItem("userId")||(null==a?void 0:a.uid)||f.Z.get("guestId"))},children:"Add credits"})]})]})}),(0,s.jsx)("div",{className:"border-b-2 px-10 py-1.5 font-medium cursor-pointer",children:(0,s.jsx)(c(),{href:"/profile",onClick:()=>(0,I.l)("UserClickedOnProfileLinkInNavbar",localStorage.getItem("userId")||(null==a?void 0:a.uid)||f.Z.get("guestId")),children:"Profile"})}),(0,s.jsxs)("button",{className:"flex items-center space-x-2 px-2 py-2",onClick(){y(),(0,I.l)("UserLoggedOut",localStorage.getItem("userId")||(null==a?void 0:a.uid)||f.Z.get("guestId"))},children:[(0,s.jsx)(d(),{src:"/assets/icons/signOutBtn.svg",alt:"Sign Out",width:20,height:20}),(0,s.jsx)("span",{children:"Sign Out"})]})]})]}):(0,s.jsxs)("div",{className:"flex space-x-2 lg:space-x-4 items-center justify-center",children:[(0,s.jsx)("div",{children:(0,s.jsx)("button",{className:"w-full px-2 lg:px-4 py-4 underline text-[17px] duration-300 hover:font-medium",onClick(){k(),(0,I.l)("UserLoggedIn",localStorage.getItem("userId")||(null==a?void 0:a.uid)||f.Z.get("guestId"))},children:"Sign in"})}),(0,s.jsx)("div",{className:"bg-[#14213D] text-white rounded-md duration-300 hover:bg-primaryDark",children:(0,s.jsx)("button",{className:"w-full px-4 lg:px-8 py-4",onClick(){k(),(0,I.l)("UserLoggedIn",localStorage.getItem("userId")||(null==a?void 0:a.uid)||f.Z.get("guestId"))},children:"Sign up"})})]})]})]})})})]})]})};var y=k},4432:function(e,t,r){async function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let r=await fetch(e,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(t||{})});return await r.json()}catch(s){if(s instanceof Error)throw Error(s.message);throw s}}r.d(t,{M:function(){return a}});var l=r(1291);let n=null,i=()=>(n||(n=(0,l.J)("pk_live_51LzhcZIGIjJte0RIQm0mLXvZwsYwHsl2XViGzYGrGD8rpHTQiixcIMKgaukh6OePkYtH8r0ujJYglQ3Oc1EG60je00noMU9Ban")),n),a=async e=>{let t=await s("/api/checkout_session",{email:e});if(500===t.statusCode){console.error(t.message);return}let r=await i(),{error:l}=await r.redirectToCheckout({sessionId:t.id});console.warn(l.message)}}}]);
//# sourceMappingURL=4185.1d8f13f742c07418.js.map